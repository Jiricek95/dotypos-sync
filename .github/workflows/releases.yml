<<<<<<< HEAD
name: Generate Installable Plugin and Upload as Release Asset
=======
name: Build Plugin ZIP for WordPress
>>>>>>> 2a3ac4fa9ca9ccb9520f408278284ee8ffe2be53

on:
  push:
    tags:
      - "v*"
  release:
    types: [published]

jobs:
  build:
    name: Upload Release Asset
    runs-on: ubuntu-latest

    steps:
<<<<<<< HEAD
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Prepare build directory
        run: |
          mkdir -p build/dotypos-sync-main
          rsync -av --exclude={'.git*','node_modules','CODE_OF_CONDUCT.md','CONTRIBUTING.md','ISSUE_TEMPLATE.md','PULL_REQUEST_TEMPLATE.md','*.dist','composer.*','dev-helpers','build'} ./ build/dotypos-sync-main/
          
      - name: Create ZIP package
        run: |
          cd build
          zip -r dotypos-sync-main.zip dotypos-sync-main

      - name: Upload to GitHub Release
        uses: softprops/action-gh-release@v1
        with:
          files: build/dotypos-sync-main.zip
        env:
          GITHUB_TOKEN: ${{ secrets.GH_PAT }}  # Použití vlastního PAT místo GITHUB_TOKEN
=======
      - name: 🛠️ Checkout repository
        uses: actions/checkout@v3

      - name: 🗂️ Připravit složku pro ZIP
        run: |
          mkdir dotypos-sync-main
          rsync -av --exclude="dotypos-sync-main" --exclude=".git" --exclude=".github" ./ dotypos-sync-main/

      - name: 📦 Vytvořit ZIP soubor
        run: |
          version=$(git describe --tags --abbrev=0)
          zip -r "dotypos-sync-${version}.zip" dotypos-sync

      - name: 🚀 Připojit ZIP k release
        uses: softprops/action-gh-release@v1
        with:
          files: dotypos-sync-*.zip
>>>>>>> 2a3ac4fa9ca9ccb9520f408278284ee8ffe2be53
